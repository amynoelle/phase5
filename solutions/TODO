- p4 can be simpified significantly.

- We should add a knob to p4 that controls whether open directories
  may be removed.  Then we can test both cases.
